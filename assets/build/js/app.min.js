"use strict";for(var i=100;i<=1e3;i+=50){var option,weight_select=document.getElementById("weight");weight_select&&((option=document.createElement("option")).appendChild(document.createTextNode(i+"kg")),option.value=i,weight_select.appendChild(option))}function addRow(){var e=document.querySelectorAll(".form-feed-input"),r=document.querySelectorAll(".feed-row"),t=document.querySelector(".feeding-calculator-flex-wrap"),o=document.createElement("div");o.classList.add("feed-row","feed-row-"+(r.length+1)),t.appendChild(o);for(var l=0;l<8;l++){var n=e[l].cloneNode(!0);n.value="",o.appendChild(n)}}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function printResult(e,r,t,o,l,n){var a=6<arguments.length&&void 0!==arguments[6]&&arguments[6];document.querySelector(".result-"+e+"-mj").innerHTML=Math.round(r),document.querySelector(".result-"+e+"-smrp").innerHTML=Math.round(t),document.querySelector(".result-"+e+"-ca").innerHTML=o.toFixed(1),document.querySelector(".result-"+e+"-p").innerHTML=Math.round(100*(l+1e-5)/100),document.querySelector(".result-"+e+"-mg").innerHTML=Math.round(100*(n+Number.EPSILON)/100),a&&(document.querySelector(".result-"+e+"-selen").innerHTML=a.toFixed(1),alerted=5<document.querySelector(".result-"+e+"-selen").innerHTML&&0==alerted&&(alert("The amount of selenium is probably toxic for your horse!"),!0)),document.querySelectorAll('li[class*="-total"]').forEach(function(e){parseFloat(e.innerHTML)<0?e.classList.add("low-value"):5<parseFloat(e.innerHTML)?e.classList.add("high-value"):-1<parseFloat(e.innerHTML)&&parseFloat(e.innerHTML)<1&&e.classList.add("good-value")})}function get_profile(){document.querySelector(".profile-name").innerHTML;var e=document.querySelector(".profile-born").innerHTML,r=document.querySelector(".profile-weight").innerHTML,t=(document.querySelector(".profile-look").innerHTML,document.querySelector(".profile-type").innerHTML),o=(new Date).getFullYear()-e;work_amount_calculation(r,base_amount_calculation(o,r,t));var l={age:o,weight:r,type:t};return document.querySelector(".result-wrapper").scrollIntoView({behavior:"smooth"}),feed_calculation(l)}function profile_submit(){var e=document.querySelector(".name").value,r=document.querySelector(".born").value,t=document.querySelector(".weight").value,o=(document.querySelector(".hull").value,document.querySelector(".type").value);if(""==r||4!=r.length)return alert("Error! Enter the year the horse was born with four digits"),void document.querySelector(".born").classList.add("error");document.querySelector(".born").classList.remove("error");var l=(new Date).getFullYear()-r;if(l<0)return alert("Well time flies! But we can't use a year ahead of the current year, "+(new Date).getFullYear()),void document.querySelector(".born").classList.add("error");if(document.querySelector(".born").classList.remove("error"),65<l)return alert("The worlds oldest horse Billy died at the age of 62 years are you sure your horse is "+l+" years old?"),void document.querySelector(".born").classList.add("error");if(document.querySelector(".born").classList.remove("error"),"null"==t)return alert("You must fill in the weight field"),void document.querySelector(".weight").classList.add("error");document.querySelector(".weight").classList.remove("error"),""!=e&&(document.querySelector(".profile-name").innerHTML="Uträkning för "+capitalizeFirstLetter(e)),work_amount_calculation(t,base_amount_calculation(l,t,o));var n={age:l,weight:t,type:o};return document.querySelector(".result-wrapper").scrollIntoView({behavior:"smooth"}),feed_calculation(n)}function base_amount_calculation(e,r,t){var o;if(mj=.5*Math.pow(parseInt(r),.75),smrp=6*mj,ca=4*parseFloat(r/100),mg=1.5*parseFloat(r/100),phosphor=2.8*parseFloat(r/100),selenium=.2*parseFloat(r/100),!(e<3))return e<20?("type-normal"==t?(mj*=1.05,smrp*=1.05):"type-hard"==t&&(mj*=1.1,smrp*=1.1),o={mj:mj,smrp:smrp,ca:ca,p:phosphor,mg:mg,selen:selenium}):smrp+=6*mj,printResult("need",mj,smrp,ca,phosphor,mg,selenium),o;alert("Unfortunatly we don't calculate the need for growing horses at the moment")}function work_amount_calculation(e,r){var t=0,t=document.querySelector(".walk")?document.querySelector(".walk").value:(t=document.querySelector(".profile-walk").innerHTML).replace(/\D/g,""),o=0,o=document.querySelector(".trot")?document.querySelector(".trot").value:(o=document.querySelector(".profile-trot-canter").innerHTML).replace(/\D/g,"");if(""!=t||""!=o){""==t?t=0:""==o&&(o=0),walk_mj=.002*e/10*t,walk_smrp=6*walk_mj,trot_mj=1.3/100*e/10*o,trot_smrp=6*trot_mj,mj=walk_mj+trot_mj,smrp=trot_smrp+walk_smrp;var l=mj/r.mj*100,n=!0;return l<30&&0<l?(work_ca=e/100*6,work_p=e/100*3.6,work_mg=e/100*1.9):30<=l&&l<50?(work_ca=e/100*7,work_p=e/100*4.2,work_mg=e/100*2.3):50<l?(work_ca=e/100*8,work_p=e/100*5.8,work_mg=e/100*3):(work_ca=0,work_mg=0,work_p=0,n=!1),mg=n?(ca=work_ca-r.ca,p=work_p-r.p,work_mg-r.mg):(ca=0,p=0),printResult("work",mj,smrp,ca,p,mg),{mj:mj,smrp:smrp,ca:ca,p:p,mg:mg}}document.querySelector(".result-work").querySelectorAll("li").forEach(function(e){e.innerHTML=""})}function feed_input_collection(e){var r=document.querySelectorAll('input[class*="-'+e+'"]'),n=0;return r.forEach(function(e){for(var r=e.parentNode.children,t=0,o=0;o<r.length;o++){var l=r[o];l.classList.contains("input-amount")&&(t=l.value),l.classList.contains("input-solids")&&""!=l.value&&(t*=l.value/100)}n+=parseFloat(e.value*t)}),n}function feed_calculation(e){var r=base_amount_calculation(e.age,e.weight,e.type),t=work_amount_calculation(e.weight,r),o=feed_input_collection("mj"),l=feed_input_collection("smrp"),n=feed_input_collection("selen"),a=feed_input_collection("ca"),c=feed_input_collection("mg"),u=feed_input_collection("p");mg=t?(mj=calculate(r.mj,t.mj,o),smrp=calculate(r.smrp,t.smrp,l),ca=calculate(r.ca,t.ca,a),p=calculate(r.p,t.p,u),calculate(r.mg,t.mg,c)):(mj=calculate(r.mj,0,o),smrp=calculate(r.smrp,0,l),ca=calculate(r.ca,0,a),p=calculate(r.p,0,u),calculate(r.mg,0,c)),selen=calculate(r.selen,0,n),printResult("feed",mj.given,smrp.given,a,u,c,n),printResult("total",mj.result,smrp.result,ca.result,p.result,mg.result,selen.result)}function calculate(e,r,t){return{given:parseFloat(t),result:parseFloat(t)-parseFloat(e+r)}}function submitForm(){document.querySelector(".form-feed").submit()}function editCalculation(e,r){window.location.href="/calculate/"+r+"?q="+e,document.querySelector(".feed-ratio-ul-"+e).querySelectorAll("label").forEach(function(e){if("amount"==e.innerHTML)for(var r=e.parentNode.querySelectorAll("li"),t=0;t<r.length;t++)addRow()})}window.onload=function(){var e;document.querySelector(".add-row")&&document.querySelector(".add-row").addEventListener("click",addRow),document.querySelector("#save-calculation")&&document.querySelector("#save-calculation").addEventListener("click",submitForm),document.querySelector(".change-profile-button")&&(e=document.querySelector(".change-profile-button"),profile_name=e.getAttribute("id"),e.addEventListener("click",function(){window.location.href="/profile/"+profile_name+"/edit"}))};
"use strict";function validateProfile(e){var r=document.getElementById(e+"-profile-form"),t=r.querySelectorAll("input"),n=r.querySelectorAll("select"),o={};document.querySelector(".error-list").innerHTML="",t.forEach(function(e){var r;"submit"!=e.type&&(o[e.name]=[]),"walk"!=e.name&&"trotCanter"!=e.name&&"submit"!=e.type&&(""==e.value||null==e.value?(o[e.name].push("Fältet får inte vara tomt"),e.classList.add("error-input-"+e.name,"error")):e.classList.remove("error-input-"+e.name,"error")),"name"==e.name&&(""==(r=e.value.replace(/[^a-zA-Z0-9äöåÄÖÅ '-]/g,"").trim())?(o[e.name].push("Endast tecken A-Ö, 1-9, apostrof och bindestreck  är tillåtna att använda"),e.classList.add("error-input-"+e.name,"error")):e.value=r),"born"==e.name&&(e.value>(new Date).getFullYear()?(o[e.name].push("Årtalet kan inte vara satt i framtiden"),e.classList.add("error-input-"+e.name,"error")):e.value.length<4?(o[e.name].push("Årtalet måste vara angivet med 4 siffror exempel: "+(new Date).getFullYear()),e.classList.add("error-input-"+e.name,"error")):e.classList.remove("error-input-"+e.name,"error"))}),n.forEach(function(e){o[e.name]=[],"null"==e.value||""==e.value?(o[e.name].push("Fältet får inte vara tomt"),e.classList.add("error-input-"+e.name,"error")):e.classList.remove("error-input-"+e.name,"error")});for(var l=!0,a=0;a<Object.keys(o).length;a++)!function(e){var n,a=Object.keys(o)[e],r=o[a];0<r.length&&(n=document.querySelector(".error-list"),r.forEach(function(e){var r="";switch(a){case"name":r="Namn";break;case"born":r="Född";break;case"gender":r="Kön";break;case"weight":r="Vikt";break;case"type":r="Typ";break;case"look":r="Hull"}var t=document.createElement("li");t.innerHTML=r+": "+e,n.appendChild(t)}),l=!1)}(a);0==l?document.querySelector(".error-list").style.display="block":(document.querySelector(".error-list").style.display="none",document.getElementById(e+"-profile-form").submit())}function card_click_event(){var e,r,t;document.querySelector(".cards_wrapper")?(e=document.querySelector(".sec_first"),r=document.querySelector(".sec_second"),t=document.querySelector(".sec_third"),e.addEventListener("click",function(){window.location.href=window.location.href+"calculator"}),r.addEventListener("click",function(){window.location.href=window.location.href+"profiles"}),t.addEventListener("click",function(){window.location.href=window.location.href+"profile/add"})):console.warn("Couldn't find wrapper")}function validateSearchForm(){document.querySelectorAll("input").forEach(function(e){e.value=e.value.replace(/[^a-zA-Z0-9äöåÄÖÅ '-]/g,"").trim()}),document.getElementById("profiles-search-form").submit()}window.onload=function(){card_click_event()};